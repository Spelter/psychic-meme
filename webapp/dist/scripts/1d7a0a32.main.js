"use strict";$(document).ready(function(){var a="http://{s}.tile.cloudmade.com/733e599a1fe841afaceb855b0ac0f833/{styleId}/256/{z}/{x}/{y}.png",b="Map data &copy; 2011 OpenStreetMap contributors, Imagery &copy; 2011 CloudMade",c=L.tileLayer("http://{s}.tile2.opencyclemap.org/transport/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.opencyclemap.org">OpenCycleMap</a>, &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'}),d=L.tileLayer(a,{styleId:33738,attribution:b}),e=L.tileLayer(a,{styleId:12790,attribution:b}),f=function(a){var b=360*Math.random(),c={color:"#000",weight:1,fillColor:"hsl("+b+",100%,50%)",radius:20,fillOpacity:.7,rotation:0,position:{x:0,y:0},offset:0,numberOfSides:50,barThickness:10},d=100*Math.random();return c.data={"On time":100-d,Delayed:d},c.chartOptions={"On time":{fillColor:"#00FF00",minValue:0,maxValue:100,maxHeight:20,displayText:function(a){return a.toFixed(2)+"%"}},Delayed:{fillColor:"#FF0000",minValue:0,maxValue:100,maxHeight:20,displayText:function(a){return a.toFixed(2)+"%"}}},new L.PieChartMarker(a,c)},g=new L.MarkerClusterGroup({maxClusterRadius:120,iconCreateFunction:function(a){var b=a.getAllChildMarkers();return L.divIcon({html:b.length,className:"mycluster",iconSize:L.point(40,30)})}}),h=L.map("map",{center:new L.LatLng(64.4367,16.39882),zoom:5,layers:[c,g]});$.getJSON("lib/latlon-pretty.geojson").done(function(a){var b=L.geoJson(a,{pointToLayer:function(a,b){return f(b)}});g.addLayer(b),h.layerControl.addOverlay(b,"Datalag (geojson)")});var i={Rail:d,"Rail and road":e,"Thunderforest Transport":c},j={"Datalag (cluster)":g};h.layerControl=L.control.layers(i,j).addTo(h)});