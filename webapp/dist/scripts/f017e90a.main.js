"use strict";var map,railStations=new L.featureGroup;$(document).ready(function(){function a(){return window.alert("helloWorld!"),!1}function b(){$("#expList").find("li:has(ul)").click(function(a){return this==a.target&&($(this).toggleClass("expanded"),$(this).children("ul").toggle("medium")),c(a.target.firstChild.nodeValue),!1}).addClass("collapsed").children("ul").hide(),$("#expandList").unbind("click").click(function(){$(".collapsed").addClass("expanded"),$(".collapsed").children().show("medium")}),$("#collapseList").unbind("click").click(function(){$(".collapsed").removeClass("expanded"),$(".collapsed").children().hide("medium")})}function c(a){railStations.clearLayers();var b=[];$.getJSON(d+"/rail/view/"+a).done(function(a){L.geoJson(a,{pointToLayer:function(a,c){var d=a.properties.tags.name;return b.push(c),L.marker(c).bindPopup(d)}}).addTo(railStations),map.fitBounds(new L.latLngBounds(b).pad(.5))})}var d="http://"+window.document.location.host.replace(/:.*/,"");L.Icon.Default.imagePath="/images/";{var e="http://{s}.tile.cloudmade.com/733e599a1fe841afaceb855b0ac0f833/{styleId}/256/{z}/{x}/{y}.png",f="Map data &copy; 2011 OpenStreetMap contributors, Imagery &copy; 2011 CloudMade",g=L.tileLayer("http://{s}.tile2.opencyclemap.org/transport/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.opencyclemap.org">OpenCycleMap</a>, &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'}),h="";L.tileLayer(e,{styleId:33738,attribution:f}),L.tileLayer(e,{styleId:12790,attribution:f})}map=L.map("map",{center:new L.LatLng(64.4367,16.39882),zoom:5,layers:[g,railStations],worldCopyJump:!0});var i=L.control();i.onAdd=function(){return this._div=L.DomUtil.create("div","info"),this.update(),this._div},i.update=function(){this._div.innerHTML=h},$.getJSON(d+"/rail/section").done(function(a){for(var c='<div id="listContainer"><ul id="expList"><li>Norge<ul>',d=0;d<a.length;d++){c+="<li>"+a[d].omrade+"<ul>";for(var e=0;e<a[d].baner.length;e++){c+="<li>"+a[d].baner[e].banesjef+"<ul>";for(var f=0;f<a[d].baner[e].banestrekninger.length;f++)c+="<li>"+a[d].baner[e].banestrekninger[f].banestrekning+"</li>";c+="</ul></li>"}c+="</ul></li>"}c+="</ul></li></ul></div>",i._div.innerHTML=c,b()}).fail(function(){console.dir(arguments)}),i.addTo(map),$("#theLink").click(function(b){b.preventDefault(),a()}),c("Norge")});