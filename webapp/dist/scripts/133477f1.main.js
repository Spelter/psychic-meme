"use strict";$(document).ready(function(){function a(a){l.setLatLng(a.latlng).setContent("You clicked the map at "+a.latlng.toString()).openOn(i)}var b="http://{s}.tile.cloudmade.com/733e599a1fe841afaceb855b0ac0f833/{styleId}/256/{z}/{x}/{y}.png",c="Map data &copy; 2011 OpenStreetMap contributors, Imagery &copy; 2011 CloudMade",d=L.tileLayer("http://{s}.tile2.opencyclemap.org/transport/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.opencyclemap.org">OpenCycleMap</a>, &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'}),e=L.tileLayer(b,{styleId:33738,attribution:c}),f=L.tileLayer(b,{styleId:12790,attribution:c}),g=function(a){var b=360*Math.random(),c={color:"#000",weight:1,fillColor:"hsl("+b+",100%,50%)",radius:20,fillOpacity:.7,rotation:0,position:{x:0,y:0},offset:0,numberOfSides:50,barThickness:10},d=100*Math.random();return c.data={"On time":100-d,Delayed:d},c.chartOptions={"On time":{fillColor:"#00FF00",minValue:0,maxValue:100,maxHeight:20,displayText:function(a){return a.toFixed(2)+"%"}},Delayed:{fillColor:"#FF0000",minValue:0,maxValue:100,maxHeight:20,displayText:function(a){return a.toFixed(2)+"%"}}},new L.PieChartMarker(a,c)},h=new L.MarkerClusterGroup({maxClusterRadius:120,iconCreateFunction:function(a){a.getAllChildMarkers();return L.divIcon({html:g(a.getLatLng)})}}),i=L.map("map",{center:new L.LatLng(64.4367,16.39882),zoom:5,layers:[d,h]});$.getJSON("lib/latlon-pretty.geojson").done(function(a){var b=L.geoJson(a,{pointToLayer:function(a,b){var c=a.properties.tags.name;return L.marker(b).bindPopup(c)}});h.addLayer(b),i.layerControl.addOverlay(b,"Datalag (geojson)")});var j={Rail:e,"Rail and road":f,"Thunderforest Transport":d},k={"Datalag (cluster)":h};i.layerControl=L.control.layers(j,k).addTo(i);var l=L.popup();i.on("click",a)});